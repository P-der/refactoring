### 搬移特性



#### 搬移函数

- 动机：频繁引用其他上下文中的元素，而对自身上下文中的元素却关心甚少
- 做法：
  - 检查函数在当前上下文里引用的所有程序元素(包括变量和函数)，考虑是否需要将它们一并搬移
  - 检查待搬移函数是否具备多态性
  - 将函数复制一份到目标上下文中。调整函数，使它能适应新家
  - 执行静态检查
  - 设法从源上下文中正确引用目标函数
  - 修改源函数，使之成为一个纯委托函数
  - 测试
  - 考虑对源函数使用`内联函数`


#### 搬移字段

- 动机：如果更新一个字段的时候需要在多个结构中进行修改，就是一个信号
- 做法： 
  - 确保源字段已经得到了良好封装
  - 测试
  - 在目标对象上创建一个字段(及对应的访问函数)
  - 执行静态检查
  - 确保源对象里能够正常引用目标对象
  - 调整对象的访问函数，令其使用目标对象的字段
  - 测试
  - 移除源对象上的字段
  - 测试