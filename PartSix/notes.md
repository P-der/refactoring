### 第一组重构

#### 提炼函数

- 动机： 将意图与实现分离
- 做法：
  - 创造一个函数，根据意图进行命名
  - 将待提炼的代码从源函数中复制到新建的目标函数中
  - 检查提炼出来的函数，看看是否引用了一些无法在新函数中使用的变量，处理这些变量
  - 处理完变量后，编译
  - 在源函数中替换代码
  - 测试
  - 查看是否有相同或相似的代码段，如果有，考虑替换为提炼出来的新函数
- 范例
  - 如果无局部变量，可以直接替换
  - 有局部变量，作为参数传入
  - 如果对局部变量有赋值，可以移动变量声明到使用处，提炼出代码后，统一返回需要赋值的局部变量

#### 内联函数

- 动机：函数内容和其名称同样清晰易读时；有一群组织不合理的函数，可以先内联，然后重新提炼函数时
- 做法
  - 检查函数，确定不具多态性
  - 找出函数所有调用点
  - 将所有调用点替换为函数本体
  - 每次替换后执行测试
  - 删除函数的定义
- 范例
  - 简单情况，直接把返回或者函数内容直接替换
  - 如果有参数并返回，需要修改参数为对应的值

#### 提炼变量

- 动机：表达式非常复杂而难以阅读
- 做法：
  - 确认要提炼的表达式没有副作用
  - 声明一个不可修改的变量，复制要提炼的表达式，把结果赋值给变量
  - 用这个新变量替换原来的表达式
  - 测试
- 范例：
  - 一般情况，直接提炼即可
  - 在一个类中的话，更好的是提炼为一个get函数



