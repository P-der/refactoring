### 处理继承关系



#### 函数上移

- 动机：避免重复代码
- 做法：
  - 检查待提升函数，确定它们是完全一致的
  - 检查函数体内引用的所有函数调用和字段都能从超类中调用到
  - 如果待提升函数的签名不同，使用`改变函数声明`将那些签名都修改为你想要在超类中使用的签名
  - 在超类中新建一个函数，将某一个待提升函数的代码复制到其中
  - 执行静态检查
  - 移除一个待提升的子类函数
  - 测试
  - 逐一移除待提升的子类函数，直到只剩下超类中的函数为止


#### 字段上移

- 动机：如果子类中某些字段使用的方式相似，就可以提升到超类中去
- 做法：
  - 针对待提升之字段，检查它们的所有使用点，确认它们以同样的方式被使用
  - 如果这些字段的名称不同，先使用`变量改名`为它们取个相同的名字
  - 在超类中新建一个字段
  - 移除子类中的字段
  - 测试


#### 构造函数本体上移

- 动机：针对构造函数中共用的部分提升到超类中
- 做法：
  - 如果超类还不存在构造函数，首先为其定义一个。确保让子类调用超类的构造函数
  - 使用`移动语句`将子类中构造函数中的公共语句移动到超类的构造函数调用语句之后
  - 逐一移除子类间的公共代码，将其提升至超类构造函数中。对于公共代码中引用的变量，将其作为参数传递给超类的构造函数
  - 测试
  - 如果存在无法简单提升至超类的公共代码，先应用`提炼函数`，再利用`函数上移`提升之